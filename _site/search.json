[
  {
    "objectID": "Metadaten.html",
    "href": "Metadaten.html",
    "title": "Metadaten",
    "section": "",
    "text": "Code\nsuppressPackageStartupMessages({\n  library(rvest)\n  library(readr)\n  library(dplyr)\n  library(readr)\n  library(stringr)\n  library(purrr)\n  library(fs)\n  library(lubridate)\n  library(stringi)\n  library(ggplot2)\n  library(tidyr)\n  library(sf)\n  library(rnaturalearth)\n  library(rnaturalearthdata)\n})"
  },
  {
    "objectID": "Metadaten.html#metadaten-für-10-min-lufttemperatur",
    "href": "Metadaten.html#metadaten-für-10-min-lufttemperatur",
    "title": "Metadaten",
    "section": "Metadaten für 10 min Lufttemperatur",
    "text": "Metadaten für 10 min Lufttemperatur"
  },
  {
    "objectID": "Metadaten.html#metadaten-einlesen",
    "href": "Metadaten.html#metadaten-einlesen",
    "title": "Metadaten",
    "section": "Metadaten einlesen",
    "text": "Metadaten einlesen\n\n\nCode\nif (!file.exists(\"meta_go_clean.rds\")) {\n  \n  # Alle entpackten txt-Dateien auflisten\n  txt_files &lt;- dir_ls(\"dwd_data/meta\", recurse = TRUE, regexp = \"\\\\.txt$\")\n  \n  # Nur Dateien, die \"historie\" oder \"Metadaten\" im Namen tragen\n  relevant_txts &lt;- txt_files[str_detect(txt_files, \"(historie|Metadaten)\")]\n  \n  # Einlesefunktion mit Stations-ID-Erkennung (ALT)\n  read_meta_table &lt;- function(file) {\n    station_id &lt;- str_extract(file, \"\\\\d{5}\")\n    \n    tryCatch({\n      df &lt;- read_delim(\n        file,\n        delim = \";\",\n        col_types = cols(.default = \"c\"),\n        locale = locale(encoding = \"Latin1\"),\n        skip = 0,\n        trim_ws = TRUE\n      )\n      df$STATIONS_ID &lt;- station_id\n      df$source_file &lt;- basename(file)\n      df\n    }, error = function(e) {\n      message(\"Fehler in Datei: \", file)\n      NULL\n    })\n  }\n  \n  \n  # Alles einlesen\n  meta_list &lt;- map(relevant_txts, read_meta_table)\n  \n  # In DataFrame zusammenführen\n  meta_df &lt;- bind_rows(meta_list)\n  \n  # Cleanup\n  meta_geo &lt;- meta_df %&gt;%\n    filter(!is.na(Stations_id), !is.na(Stationsname)) %&gt;%\n    distinct()\n  \n  # Datentyp Umwandlung\n  meta_geo_clean &lt;- meta_geo %&gt;%\n    mutate(\n      # ID als integer\n      STATIONS_ID = as.integer(STATIONS_ID),\n      \n      # Koordinaten & Höhe numerisch\n      Stationshoehe = as.numeric(Stationshoehe),\n      Geogr.Breite = as.numeric(Geogr.Breite),\n      Geogr.Laenge = as.numeric(Geogr.Laenge),\n      \n      # Datumsangaben\n      von_datum = ymd(von_datum),\n      bis_datum = ymd(bis_datum),\n      \n      # Unicode bereinigen (z. B. ß, ä etc.)\n      Stationsname = stri_trans_general(Stationsname, \"latin-ascii\")\n    ) \n  \n  saveRDS(meta_geo_clean, \"meta_go_clean.rds\")\n} else {\n  meta_geo_clean &lt;- readRDS(\"meta_go_clean.rds\")\n}\n\n\n\nerste 100 Zeilen\n\n\nCode\nhead(meta_geo_clean, 100)\n\n\n# A tibble: 100 × 30\n   Stations_id Stationshoehe Geogr.Breite Geogr.Laenge von_datum  bis_datum \n   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;        &lt;date&gt;     &lt;date&gt;    \n 1 3                    163. 50.7833      6.0833       1891-01-01 1900-06-10\n 2 3                    202  50.7833      6.1000       1900-06-11 1944-08-31\n 3 3                    190  50.7667      6.0833       1944-09-01 1945-03-31\n 4 3                    178  50.7833      6.1000       1945-04-01 1950-03-31\n 5 3                    202  50.7827      6.0941       1950-04-01 2008-10-07\n 6 3                    202  50.7827      6.0941       2008-10-08 2012-04-06\n 7 44                    45  52.8900      8.2300       1945-08-01 1948-12-31\n 8 44                    45  52.8900      8.2300       1952-01-01 1971-02-28\n 9 44                    46  52.8846      8.2308       1971-03-01 1993-06-30\n10 44                    42  52.9164      8.2211       1993-07-01 2007-03-31\n# ℹ 90 more rows\n# ℹ 24 more variables: Stationsname &lt;chr&gt;, STATIONS_ID &lt;int&gt;,\n#   source_file &lt;chr&gt;, Stations_ID &lt;chr&gt;, `Geo. Laenge [Grad]` &lt;chr&gt;,\n#   `Geo. Breite [Grad]` &lt;chr&gt;, `Stationshoehe [m]` &lt;chr&gt;,\n#   `Geberhoehe ueber Grund [m]` &lt;chr&gt;, Von_Datum &lt;chr&gt;, Bis_Datum &lt;chr&gt;,\n#   `Geraetetyp Name` &lt;chr&gt;, Messverfahren &lt;chr&gt;, eor &lt;chr&gt;, ...12 &lt;chr&gt;,\n#   Parameter &lt;chr&gt;, Parameterbeschreibung &lt;chr&gt;, Einheit &lt;chr&gt;, …"
  },
  {
    "objectID": "Metadaten.html#übersicht-über-die-files",
    "href": "Metadaten.html#übersicht-über-die-files",
    "title": "Metadaten",
    "section": "Übersicht über die Files",
    "text": "Übersicht über die Files\n\nmeta_files &lt;- dir_ls(\"dwd_data/meta\", recurse = TRUE, glob = \"*.txt\")\n\n# Regex-Muster: extrahiert &lt;Parameter&gt; und &lt;ID&gt;\npattern &lt;- \"Metadaten_(.+?)_(\\\\d{5})\\\\.txt$\"\n\n# Extrahiere mit str_match\nmatches &lt;- str_match(meta_files, pattern)\n\n# Spalte 2 enthält den Parameter, Spalte 3 die ID\nmeta_info &lt;- tibble(\n  file = meta_files,\n  parameter = matches[, 2],\n  id = matches[, 3]\n)\n\nunique_parameters &lt;- unique(meta_info$parameter)\nunique_ids &lt;- unique(meta_info$id)\ntable(meta_info$id,meta_info$parameter)\n\n       \n        Geographie Geraete_Lufttemperatur Geraete_Momentane_Temperatur_In_5cm\n  00003          1                      1                                   1\n  00044          1                      1                                   1\n  00071          1                      1                                   1\n  00073          1                      1                                   1\n  00078          1                      1                                   1\n  00091          1                      1                                   1\n  00096          1                      1                                   1\n  00131          1                      1                                   1\n  00142          1                      1                                   1\n  00150          1                      1                                   1\n  00151          1                      1                                   1\n  00154          1                      1                                   1\n  00161          1                      1                                   1\n  00164          1                      1                                   1\n  00167          1                      1                                   1\n  00183          1                      1                                   1\n  00191          1                      1                                   1\n  00198          1                      1                                   1\n  00217          1                      1                                   1\n  00222          1                      1                                   1\n  00232          1                      1                                   1\n  00257          1                      1                                   1\n  00259          1                      1                                   1\n  00282          1                      1                                   1\n  00294          1                      1                                   1\n  00298          1                      1                                   1\n  00303          1                      1                                   1\n  00314          1                      1                                   1\n  00320          1                      1                                   1\n  00326          1                      1                                   1\n  00330          1                      1                                   1\n  00342          1                      1                                   1\n  00348          1                      1                                   1\n  00377          1                      1                                   1\n  00379          1                      1                                   1\n  00390          1                      1                                   1\n  00399          1                      1                                   1\n  00400          1                      1                                   1\n  00410          1                      1                                   1\n  00420          1                      1                                   1\n  00427          1                      1                                   1\n  00430          1                      1                                   1\n  00433          1                      1                                   1\n  00445          1                      1                                   1\n  00450          1                      1                                   1\n  00460          1                      1                                   1\n  00535          1                      1                                   1\n  00554          1                      1                                   1\n  00555          1                      1                                   1\n  00591          1                      1                                   1\n  00596          1                      1                                   1\n  00603          1                      1                                   1\n  00617          1                      1                                   1\n  00656          1                      1                                   1\n  00662          1                      1                                   1\n  00691          1                      1                                   1\n  00701          1                      1                                   1\n  00704          1                      1                                   1\n  00722          1                      1                                   1\n  00755          1                      1                                   1\n  00757          1                      1                                   1\n  00760          1                      1                                   1\n  00817          1                      1                                   1\n  00840          1                      1                                   1\n  00850          1                      1                                   1\n  00853          1                      1                                   1\n  00856          1                      1                                   1\n  00860          1                      1                                   1\n  00863          1                      1                                   1\n  00867          1                      1                                   1\n  00880          1                      1                                   1\n  00891          1                      1                                   1\n  00896          1                      1                                   1\n  00917          1                      1                                   1\n  00953          1                      1                                   1\n  00963          1                      1                                   1\n  00979          1                      1                                   1\n  00983          1                      1                                   1\n  00991          1                      1                                   1\n  01001          1                      1                                   1\n  01048          1                      1                                   1\n  01050          1                      1                                   1\n  01051          1                      1                                   1\n  01052          1                      1                                   1\n  01072          1                      1                                   1\n  01078          1                      1                                   1\n  01103          1                      1                                   1\n  01107          1                      1                                   1\n  01161          1                      1                                   1\n  01197          1                      1                                   1\n  01200          1                      1                                   1\n  01207          1                      1                                   1\n  01214          1                      1                                   1\n  01219          1                      0                                   0\n  01224          1                      1                                   1\n  01239          1                      1                                   1\n  01246          1                      1                                   1\n  01255          1                      1                                   1\n  01262          1                      1                                   1\n  01266          1                      1                                   1\n  01270          1                      1                                   1\n  01279          1                      1                                   1\n  01297          1                      1                                   1\n  01300          1                      1                                   1\n  01303          1                      1                                   1\n  01327          1                      1                                   1\n  01332          1                      1                                   1\n  01346          1                      1                                   1\n  01357          1                      1                                   1\n  01358          1                      1                                   1\n  01411          1                      1                                   1\n  01420          1                      1                                   1\n  01424          1                      1                                   1\n  01443          1                      1                                   1\n  01451          1                      1                                   1\n  01468          1                      1                                   1\n  01473          1                      1                                   1\n  01503          1                      1                                   1\n  01526          1                      1                                   1\n  01544          1                      1                                   1\n  01550          1                      1                                   1\n  01580          1                      1                                   1\n  01584          1                      1                                   1\n  01587          1                      1                                   1\n  01590          1                      1                                   1\n  01602          1                      1                                   1\n  01605          1                      1                                   1\n  01612          1                      1                                   1\n  01639          1                      1                                   1\n  01645          1                      1                                   1\n  01684          1                      1                                   1\n  01691          1                      1                                   1\n  01694          1                      1                                   1\n  01721          1                      1                                   1\n  01735          1                      1                                   1\n  01736          1                      1                                   1\n  01757          1                      1                                   1\n  01759          1                      1                                   1\n  01766          1                      1                                   1\n  01792          1                      1                                   1\n  01803          1                      1                                   1\n  01832          1                      1                                   0\n  01863          1                      1                                   1\n  01869          1                      1                                   1\n  01886          1                      1                                   1\n  01957          1                      1                                   1\n  01964          1                      1                                   1\n  01975          1                      1                                   1\n  01981          1                      1                                   1\n  01993          1                      0                                   0\n  02014          1                      1                                   1\n  02023          1                      1                                   1\n  02039          1                      1                                   1\n  02044          1                      1                                   1\n  02074          1                      1                                   1\n  02080          1                      1                                   1\n  02088          1                      1                                   1\n  02110          1                      1                                   1\n  02115          1                      1                                   1\n  02167          1                      1                                   1\n  02171          1                      1                                   1\n  02174          1                      1                                   1\n  02201          1                      1                                   1\n  02211          1                      1                                   1\n  02252          1                      1                                   1\n  02261          1                      1                                   1\n  02290          1                      1                                   1\n  02306          1                      1                                   1\n  02319          1                      1                                   1\n  02323          1                      1                                   1\n  02362          1                      1                                   1\n  02429          1                      1                                   1\n  02444          1                      1                                   1\n  02480          1                      1                                   1\n  02483          1                      1                                   1\n  02485          1                      1                                   1\n  02486          1                      1                                   1\n  02497          1                      1                                   1\n  02503          1                      0                                   0\n  02522          1                      1                                   1\n  02532          1                      1                                   1\n  02542          1                      1                                   1\n  02559          1                      1                                   1\n  02564          1                      1                                   1\n  02575          1                      1                                   1\n  02578          1                      1                                   1\n  02597          1                      1                                   1\n  02600          1                      1                                   1\n  02601          1                      1                                   1\n  02618          1                      1                                   1\n  02627          1                      1                                   1\n  02629          1                      1                                   1\n  02638          1                      1                                   1\n  02641          1                      1                                   1\n  02667          1                      1                                   1\n  02680          1                      1                                   1\n  02700          1                      1                                   1\n  02704          1                      1                                   1\n  02708          1                      1                                   1\n  02712          1                      1                                   1\n  02750          1                      1                                   1\n  02794          1                      1                                   1\n  02812          1                      1                                   1\n  02814          1                      1                                   1\n  02856          1                      1                                   1\n  02878          1                      1                                   1\n  02907          1                      1                                   1\n  02925          1                      1                                   1\n  02928          1                      1                                   1\n  02932          1                      1                                   1\n  02947          1                      1                                   1\n  02951          1                      1                                   1\n  02953          1                      1                                   1\n  02961          1                      1                                   0\n  02968          1                      1                                   1\n  02985          1                      1                                   1\n  03015          1                      1                                   1\n  03023          1                      1                                   1\n  03028          1                      1                                   1\n  03031          1                      1                                   1\n  03032          1                      1                                   1\n  03034          1                      1                                   1\n  03042          1                      1                                   1\n  03044          1                      1                                   1\n  03083          1                      1                                   1\n  03086          1                      1                                   1\n  03093          1                      1                                   1\n  03098          1                      1                                   1\n  03126          1                      1                                   1\n  03137          1                      1                                   1\n  03147          1                      1                                   1\n  03155          1                      1                                   1\n  03158          1                      1                                   1\n  03164          1                      1                                   1\n  03166          1                      1                                   1\n  03167          1                      1                                   1\n  03181          1                      1                                   1\n  03196          1                      1                                   1\n  03204          1                      1                                   1\n  03226          1                      1                                   1\n  03228          1                      0                                   0\n  03231          1                      1                                   1\n  03234          1                      1                                   1\n  03244          1                      1                                   1\n  03257          1                      1                                   1\n  03268          1                      1                                   1\n  03271          1                      1                                   1\n  03278          1                      1                                   1\n  03284          1                      1                                   1\n  03287          1                      1                                   1\n  03289          1                      1                                   1\n  03307          1                      1                                   1\n  03319          1                      1                                   1\n  03321          1                      1                                   0\n  03340          1                      1                                   1\n  03348          1                      1                                   1\n  03362          1                      1                                   1\n  03366          1                      1                                   1\n  03376          1                      1                                   1\n  03379          1                      1                                   1\n  03402          1                      1                                   1\n  03426          1                      1                                   1\n  03442          1                      1                                   1\n  03478          1                      0                                   0\n  03485          1                      1                                   1\n  03490          1                      1                                   1\n  03509          1                      1                                   1\n  03513          1                      1                                   1\n  03527          1                      1                                   1\n  03540          1                      1                                   1\n  03545          1                      1                                   1\n  03552          1                      1                                   1\n  03571          1                      1                                   1\n  03591          1                      1                                   1\n  03612          1                      1                                   1\n  03621          1                      1                                   1\n  03631          1                      1                                   1\n  03660          1                      1                                   1\n  03667          1                      1                                   1\n  03668          1                      1                                   1\n  03679          1                      1                                   1\n  03730          1                      1                                   1\n  03734          1                      1                                   1\n  03739          1                      1                                   1\n  03761          1                      1                                   1\n  03791          1                      1                                   1\n  03811          1                      1                                   1\n  03815          1                      1                                   1\n  03821          1                      1                                   1\n  03836          1                      1                                   1\n  03857          1                      1                                   1\n  03875          1                      1                                   1\n  03897          1                      1                                   1\n  03904          1                      1                                   1\n  03925          1                      1                                   1\n  03927          1                      1                                   1\n  03939          1                      1                                   1\n  03946          1                      1                                   1\n  03975          1                      1                                   1\n  03987          1                      1                                   1\n  04024          1                      1                                   1\n  04032          1                      1                                   1\n  04036          1                      1                                   1\n  04039          1                      1                                   1\n  04063          1                      1                                   1\n  04094          1                      1                                   1\n  04104          1                      1                                   1\n  04127          1                      1                                   1\n  04154          1                      1                                   1\n  04160          1                      1                                   1\n  04169          1                      1                                   1\n  04175          1                      1                                   1\n  04177          1                      1                                   1\n  04189          1                      1                                   1\n  04261          1                      1                                   1\n  04271          1                      1                                   1\n  04275          1                      1                                   1\n  04280          1                      1                                   1\n  04287          1                      1                                   1\n  04300          1                      1                                   1\n  04301          1                      1                                   1\n  04323          1                      1                                   1\n  04336          1                      1                                   1\n  04347          1                      0                                   0\n  04349          1                      1                                   1\n  04354          1                      1                                   1\n  04371          1                      1                                   1\n  04377          1                      1                                   1\n  04393          1                      1                                   1\n  04411          1                      1                                   1\n  04445          1                      1                                   1\n  04464          1                      1                                   1\n  04466          1                      1                                   1\n  04480          1                      1                                   1\n  04485          1                      1                                   1\n  04501          1                      1                                   1\n  04508          1                      1                                   1\n  04548          1                      1                                   1\n  04559          1                      1                                   1\n  04560          1                      1                                   1\n  04592          1                      1                                   1\n  04605          1                      1                                   1\n  04625          1                      1                                   1\n  04642          1                      1                                   1\n  04651          1                      1                                   1\n  04692          1                      1                                   1\n  04703          1                      1                                   1\n  04704          1                      1                                   1\n  04706          1                      1                                   1\n  04709          1                      1                                   1\n  04745          1                      1                                   1\n  04748          1                      1                                   1\n  04752          1                      0                                   0\n  04763          1                      1                                   1\n  04813          1                      1                                   1\n  04841          1                      1                                   1\n  04857          1                      1                                   1\n  04878          1                      1                                   1\n  04887          1                      1                                   1\n  04896          1                      1                                   1\n  04911          1                      1                                   1\n  04926          1                      1                                   1\n  04928          1                      1                                   1\n  04931          1                      1                                   1\n  04978          1                      1                                   1\n  04997          1                      1                                   1\n  05009          1                      1                                   1\n  05014          1                      1                                   1\n  05017          1                      1                                   1\n  05029          1                      1                                   1\n  05046          1                      1                                   1\n  05064          1                      1                                   1\n  05097          1                      1                                   1\n  05099          1                      1                                   1\n  05100          1                      1                                   1\n  05109          1                      1                                   1\n  05111          1                      1                                   1\n  05133          1                      1                                   1\n  05142          1                      1                                   1\n  05146          1                      1                                   1\n  05149          1                      1                                   1\n  05155          1                      1                                   1\n  05158          1                      1                                   1\n  05229          1                      1                                   1\n  05275          1                      1                                   1\n  05279          1                      1                                   1\n  05280          1                      1                                   1\n  05300          1                      1                                   1\n  05335          1                      1                                   1\n  05347          1                      1                                   1\n  05349          1                      1                                   1\n  05371          1                      1                                   1\n  05397          1                      1                                   1\n  05404          1                      1                                   1\n  05419          1                      0                                   0\n  05424          1                      1                                   1\n  05426          1                      1                                   1\n  05433          1                      1                                   1\n  05440          1                      1                                   1\n  05467          1                      1                                   1\n  05480          1                      1                                   1\n  05490          1                      1                                   1\n  05516          1                      1                                   1\n  05538          1                      1                                   1\n  05541          1                      1                                   1\n  05546          1                      1                                   1\n  05562          1                      1                                   1\n  05629          1                      1                                   1\n  05643          1                      1                                   1\n  05663          1                      0                                   0\n  05664          1                      1                                   1\n  05676          1                      1                                   1\n  05688          1                      1                                   1\n  05692          1                      1                                   1\n  05705          1                      1                                   1\n  05717          1                      1                                   1\n  05719          1                      1                                   1\n  05731          1                      1                                   1\n  05745          1                      1                                   1\n  05750          1                      1                                   1\n  05779          1                      1                                   1\n  05792          1                      1                                   0\n  05797          1                      1                                   1\n  05800          1                      1                                   1\n  05822          1                      1                                   1\n  05825          1                      1                                   1\n  05839          1                      1                                   1\n  05856          1                      1                                   1\n  05871          1                      1                                   1\n  05906          1                      1                                   1\n  05930          1                      1                                   1\n  05941          1                      1                                   1\n  06093          1                      1                                   1\n  06105          1                      1                                   1\n  06109          1                      1                                   1\n  06129          1                      1                                   1\n  06157          1                      1                                   1\n  06158          1                      1                                   1\n  06159          1                      1                                   1\n  06163          1                      1                                   1\n  06170          1                      1                                   1\n  06182          1                      1                                   1\n  06186          1                      1                                   1\n  06197          1                      1                                   1\n  06199          1                      1                                   1\n  06217          1                      1                                   1\n  06258          1                      1                                   1\n  06259          1                      1                                   1\n  06260          1                      1                                   1\n  06262          1                      1                                   1\n  06263          1                      1                                   1\n  06264          1                      1                                   1\n  06265          1                      1                                   1\n  06266          1                      1                                   1\n  06272          1                      1                                   1\n  06273          1                      1                                   1\n  06275          1                      1                                   1\n  06305          1                      1                                   1\n  06310          1                      1                                   1\n  06312          1                      1                                   1\n  06314          1                      1                                   1\n  06336          1                      1                                   1\n  06337          1                      1                                   1\n  06344          1                      1                                   1\n  06346          1                      1                                   1\n  06347          1                      1                                   1\n  07075          1                      1                                   1\n  07099          1                      1                                   1\n  07105          1                      1                                   1\n  07106          1                      1                                   1\n  07187          1                      1                                   1\n  07244          1                      1                                   1\n  07298          1                      1                                   1\n  07319          1                      1                                   1\n  07321          1                      1                                   1\n  07329          1                      1                                   1\n  07330          1                      1                                   1\n  07331          1                      1                                   1\n  07341          1                      1                                   1\n  07343          1                      1                                   1\n  07350          1                      1                                   1\n  07351          1                      1                                   1\n  07364          1                      1                                   1\n  07367          1                      1                                   1\n  07368          1                      1                                   1\n  07369          1                      1                                   1\n  07370          1                      1                                   1\n  07373          1                      1                                   1\n  07374          1                      1                                   1\n  07389          1                      1                                   1\n  07393          1                      1                                   1\n  07394          1                      1                                   1\n  07395          1                      1                                   1\n  07396          1                      1                                   1\n  07403          1                      1                                   1\n  07410          1                      1                                   1\n  07412          1                      1                                   1\n  07419          1                      1                                   1\n  07420          1                      1                                   1\n  07424          1                      1                                   1\n  07427          1                      1                                   1\n  07428          1                      1                                   1\n  07431          1                      1                                   1\n  07432          1                      1                                   1\n  13670          1                      1                                   1\n  13674          1                      1                                   1\n  13675          1                      1                                   1\n  13696          1                      1                                   1\n  13700          1                      1                                   1\n  13710          1                      1                                   1\n  13711          1                      1                                   1\n  13713          1                      1                                   1\n  13776          1                      1                                   1\n  13777          1                      1                                   1\n  13965          1                      1                                   1\n  15000          1                      1                                   1\n  15207          1                      1                                   1\n  15444          1                      1                                   1\n  15555          1                      1                                   1\n  15813          1                      1                                   1\n  19171          1                      1                                   1\n  19172          1                      1                                   1\n  19207          1                      1                                   1\n  19856          1                      1                                   1\n       \n        Geraete_Rel_Feuchte Parameter Stationsname Stationsname_Betreibername\n  00003                   1         1            0                          1\n  00044                   1         1            0                          1\n  00071                   1         1            0                          1\n  00073                   1         1            0                          1\n  00078                   1         1            0                          1\n  00091                   1         1            0                          1\n  00096                   1         1            0                          1\n  00131                   1         1            0                          1\n  00142                   1         1            0                          1\n  00150                   1         1            0                          1\n  00151                   1         1            0                          1\n  00154                   1         1            0                          1\n  00161                   1         1            0                          1\n  00164                   1         1            0                          1\n  00167                   1         1            0                          1\n  00183                   1         1            0                          1\n  00191                   1         1            0                          1\n  00198                   1         1            0                          1\n  00217                   1         1            0                          1\n  00222                   1         1            0                          1\n  00232                   1         1            0                          1\n  00257                   1         1            0                          1\n  00259                   1         1            0                          1\n  00282                   1         1            0                          1\n  00294                   1         1            0                          1\n  00298                   1         1            0                          1\n  00303                   1         1            0                          1\n  00314                   1         1            0                          1\n  00320                   1         1            0                          1\n  00326                   1         1            0                          1\n  00330                   1         1            0                          1\n  00342                   1         1            0                          1\n  00348                   1         1            0                          1\n  00377                   1         1            0                          1\n  00379                   1         1            0                          1\n  00390                   1         1            0                          1\n  00399                   1         1            0                          1\n  00400                   1         1            0                          1\n  00410                   1         1            0                          1\n  00420                   1         1            0                          1\n  00427                   1         1            0                          1\n  00430                   1         1            0                          1\n  00433                   1         1            0                          1\n  00445                   1         1            0                          1\n  00450                   1         1            0                          1\n  00460                   1         1            0                          1\n  00535                   1         1            0                          1\n  00554                   1         1            0                          1\n  00555                   1         1            0                          1\n  00591                   1         1            0                          1\n  00596                   1         1            0                          1\n  00603                   1         1            0                          1\n  00617                   1         1            0                          1\n  00656                   1         1            0                          1\n  00662                   1         1            0                          1\n  00691                   1         1            0                          1\n  00701                   1         1            0                          1\n  00704                   1         1            0                          1\n  00722                   1         1            0                          1\n  00755                   1         1            0                          1\n  00757                   1         1            0                          1\n  00760                   1         1            0                          1\n  00817                   1         1            0                          1\n  00840                   1         1            0                          1\n  00850                   1         1            0                          1\n  00853                   1         1            0                          1\n  00856                   1         1            0                          1\n  00860                   1         1            0                          1\n  00863                   1         1            0                          1\n  00867                   1         1            0                          1\n  00880                   1         1            0                          1\n  00891                   1         1            0                          1\n  00896                   1         1            0                          1\n  00917                   1         1            0                          1\n  00953                   1         1            0                          1\n  00963                   1         1            0                          1\n  00979                   1         1            0                          1\n  00983                   1         1            0                          1\n  00991                   1         1            0                          1\n  01001                   1         1            0                          1\n  01048                   1         1            0                          1\n  01050                   1         1            0                          1\n  01051                   1         1            0                          1\n  01052                   1         1            0                          1\n  01072                   1         1            0                          1\n  01078                   1         1            0                          1\n  01103                   1         1            0                          1\n  01107                   1         1            0                          1\n  01161                   1         1            0                          1\n  01197                   1         1            0                          1\n  01200                   1         1            0                          1\n  01207                   1         1            0                          1\n  01214                   1         1            0                          1\n  01219                   0         1            0                          1\n  01224                   1         1            0                          1\n  01239                   1         1            0                          1\n  01246                   1         1            0                          1\n  01255                   1         1            0                          1\n  01262                   1         1            0                          1\n  01266                   1         1            0                          1\n  01270                   1         1            0                          1\n  01279                   1         1            0                          1\n  01297                   1         1            0                          1\n  01300                   1         1            0                          1\n  01303                   1         1            0                          1\n  01327                   1         1            0                          1\n  01332                   1         1            0                          1\n  01346                   1         1            0                          1\n  01357                   1         1            0                          1\n  01358                   1         1            0                          1\n  01411                   1         1            0                          1\n  01420                   1         1            0                          1\n  01424                   1         1            0                          1\n  01443                   1         1            0                          1\n  01451                   1         1            0                          1\n  01468                   1         1            0                          1\n  01473                   1         1            0                          1\n  01503                   1         1            0                          1\n  01526                   1         1            0                          1\n  01544                   1         1            0                          1\n  01550                   1         1            0                          1\n  01580                   1         1            0                          1\n  01584                   1         1            0                          1\n  01587                   1         1            0                          1\n  01590                   1         1            0                          1\n  01602                   1         1            0                          1\n  01605                   1         1            0                          1\n  01612                   1         1            0                          1\n  01639                   1         1            0                          1\n  01645                   1         1            0                          1\n  01684                   1         1            0                          1\n  01691                   1         1            0                          1\n  01694                   1         1            0                          1\n  01721                   1         1            0                          1\n  01735                   1         1            0                          1\n  01736                   1         1            0                          1\n  01757                   1         1            0                          1\n  01759                   1         1            0                          1\n  01766                   1         1            0                          1\n  01792                   1         1            0                          1\n  01803                   1         1            0                          1\n  01832                   1         1            0                          1\n  01863                   1         1            0                          1\n  01869                   1         1            0                          1\n  01886                   1         1            0                          1\n  01957                   1         1            0                          1\n  01964                   1         1            0                          1\n  01975                   1         1            0                          1\n  01981                   1         1            0                          1\n  01993                   0         1            1                          0\n  02014                   1         1            0                          1\n  02023                   1         1            0                          1\n  02039                   1         1            0                          1\n  02044                   1         1            0                          1\n  02074                   1         1            0                          1\n  02080                   1         1            0                          1\n  02088                   1         1            0                          1\n  02110                   1         1            0                          1\n  02115                   1         1            0                          1\n  02167                   1         1            0                          1\n  02171                   1         1            0                          1\n  02174                   1         1            0                          1\n  02201                   1         1            0                          1\n  02211                   1         1            0                          1\n  02252                   1         1            0                          1\n  02261                   1         1            0                          1\n  02290                   1         1            0                          1\n  02306                   1         1            0                          1\n  02319                   1         1            0                          1\n  02323                   1         1            0                          1\n  02362                   1         1            0                          1\n  02429                   1         1            0                          1\n  02444                   1         1            0                          1\n  02480                   1         1            0                          1\n  02483                   1         1            0                          1\n  02485                   1         1            0                          1\n  02486                   1         1            0                          1\n  02497                   1         1            0                          1\n  02503                   0         1            0                          1\n  02522                   1         1            0                          1\n  02532                   1         1            0                          1\n  02542                   1         1            0                          1\n  02559                   1         1            0                          1\n  02564                   1         1            0                          1\n  02575                   1         1            0                          1\n  02578                   1         1            0                          1\n  02597                   1         1            0                          1\n  02600                   1         1            0                          1\n  02601                   1         1            0                          1\n  02618                   1         1            0                          1\n  02627                   1         1            0                          1\n  02629                   1         1            0                          1\n  02638                   1         1            0                          1\n  02641                   1         1            0                          1\n  02667                   1         1            0                          1\n  02680                   1         1            0                          1\n  02700                   1         1            0                          1\n  02704                   1         1            0                          1\n  02708                   1         1            0                          1\n  02712                   1         1            0                          1\n  02750                   1         1            0                          1\n  02794                   1         1            0                          1\n  02812                   1         1            0                          1\n  02814                   1         1            0                          1\n  02856                   1         1            0                          1\n  02878                   1         1            0                          1\n  02907                   1         1            0                          1\n  02925                   1         1            0                          1\n  02928                   1         1            0                          1\n  02932                   1         1            0                          1\n  02947                   1         1            0                          1\n  02951                   1         1            0                          1\n  02953                   1         1            0                          1\n  02961                   1         1            0                          1\n  02968                   1         1            0                          1\n  02985                   1         1            0                          1\n  03015                   1         1            0                          1\n  03023                   1         1            0                          1\n  03028                   1         1            0                          1\n  03031                   1         1            0                          1\n  03032                   1         1            0                          1\n  03034                   1         1            0                          1\n  03042                   1         1            0                          1\n  03044                   1         1            0                          1\n  03083                   1         1            0                          1\n  03086                   1         1            0                          1\n  03093                   1         1            0                          1\n  03098                   1         1            0                          1\n  03126                   1         1            0                          1\n  03137                   1         1            0                          1\n  03147                   1         1            0                          1\n  03155                   1         1            0                          1\n  03158                   1         1            0                          1\n  03164                   1         1            0                          1\n  03166                   1         1            0                          1\n  03167                   1         1            0                          1\n  03181                   1         1            0                          1\n  03196                   1         1            0                          1\n  03204                   1         1            0                          1\n  03226                   1         1            0                          1\n  03228                   0         1            1                          0\n  03231                   1         1            0                          1\n  03234                   1         1            0                          1\n  03244                   1         1            0                          1\n  03257                   1         1            0                          1\n  03268                   1         1            0                          1\n  03271                   1         1            0                          1\n  03278                   1         1            0                          1\n  03284                   1         1            0                          1\n  03287                   1         1            0                          1\n  03289                   1         1            0                          1\n  03307                   1         1            0                          1\n  03319                   1         1            0                          1\n  03321                   1         1            0                          1\n  03340                   1         1            0                          1\n  03348                   1         1            0                          1\n  03362                   1         1            0                          1\n  03366                   1         1            0                          1\n  03376                   1         1            0                          1\n  03379                   1         1            0                          1\n  03402                   1         1            0                          1\n  03426                   1         1            0                          1\n  03442                   1         1            0                          1\n  03478                   1         1            0                          1\n  03485                   1         1            0                          1\n  03490                   1         1            0                          1\n  03509                   1         1            0                          1\n  03513                   1         1            0                          1\n  03527                   1         1            0                          1\n  03540                   1         1            0                          1\n  03545                   1         1            0                          1\n  03552                   1         1            0                          1\n  03571                   1         1            0                          1\n  03591                   1         1            0                          1\n  03612                   1         1            0                          1\n  03621                   1         1            0                          1\n  03631                   1         1            0                          1\n  03660                   1         1            0                          1\n  03667                   1         1            0                          1\n  03668                   1         1            0                          1\n  03679                   1         1            0                          1\n  03730                   1         1            0                          1\n  03734                   1         1            0                          1\n  03739                   1         1            0                          1\n  03761                   1         1            0                          1\n  03791                   1         1            0                          1\n  03811                   1         1            0                          1\n  03815                   1         1            0                          1\n  03821                   1         1            0                          1\n  03836                   1         1            0                          1\n  03857                   1         1            0                          1\n  03875                   1         1            0                          1\n  03897                   1         1            0                          1\n  03904                   1         1            0                          1\n  03925                   1         1            0                          1\n  03927                   1         1            0                          1\n  03939                   1         1            0                          1\n  03946                   1         1            0                          1\n  03975                   1         1            0                          1\n  03987                   1         1            0                          1\n  04024                   1         1            0                          1\n  04032                   1         1            0                          1\n  04036                   1         1            0                          1\n  04039                   1         1            0                          1\n  04063                   1         1            0                          1\n  04094                   1         1            0                          1\n  04104                   1         1            0                          1\n  04127                   1         1            0                          1\n  04154                   1         1            0                          1\n  04160                   1         1            0                          1\n  04169                   1         1            0                          1\n  04175                   1         1            0                          1\n  04177                   1         1            0                          1\n  04189                   1         1            0                          1\n  04261                   1         1            0                          1\n  04271                   1         1            0                          1\n  04275                   1         1            0                          1\n  04280                   1         1            0                          1\n  04287                   1         1            0                          1\n  04300                   1         1            0                          1\n  04301                   1         1            0                          1\n  04323                   1         1            0                          1\n  04336                   1         1            0                          1\n  04347                   0         1            1                          0\n  04349                   1         1            0                          1\n  04354                   1         1            0                          1\n  04371                   1         1            0                          1\n  04377                   1         1            0                          1\n  04393                   1         1            0                          1\n  04411                   1         1            0                          1\n  04445                   1         1            0                          1\n  04464                   1         1            0                          1\n  04466                   1         1            0                          1\n  04480                   1         1            0                          1\n  04485                   1         1            0                          1\n  04501                   1         1            0                          1\n  04508                   1         1            0                          1\n  04548                   1         1            0                          1\n  04559                   1         1            0                          1\n  04560                   1         1            0                          1\n  04592                   1         1            0                          1\n  04605                   1         1            0                          1\n  04625                   1         1            0                          1\n  04642                   1         1            0                          1\n  04651                   1         1            0                          1\n  04692                   1         1            0                          1\n  04703                   1         1            0                          1\n  04704                   1         1            0                          1\n  04706                   1         1            0                          1\n  04709                   1         1            0                          1\n  04745                   1         1            0                          1\n  04748                   1         1            0                          1\n  04752                   1         1            0                          1\n  04763                   1         1            0                          1\n  04813                   1         1            0                          1\n  04841                   1         1            0                          1\n  04857                   1         1            0                          1\n  04878                   1         1            0                          1\n  04887                   1         1            0                          1\n  04896                   1         1            0                          1\n  04911                   1         1            0                          1\n  04926                   1         1            0                          1\n  04928                   1         1            0                          1\n  04931                   1         1            0                          1\n  04978                   1         1            0                          1\n  04997                   1         1            0                          1\n  05009                   1         1            0                          1\n  05014                   1         1            0                          1\n  05017                   1         1            0                          1\n  05029                   1         1            0                          1\n  05046                   1         1            0                          1\n  05064                   1         1            0                          1\n  05097                   1         1            0                          1\n  05099                   1         1            0                          1\n  05100                   1         1            0                          1\n  05109                   1         1            0                          1\n  05111                   1         1            0                          1\n  05133                   1         1            0                          1\n  05142                   1         1            0                          1\n  05146                   1         1            0                          1\n  05149                   1         1            0                          1\n  05155                   1         1            0                          1\n  05158                   1         1            0                          1\n  05229                   1         1            0                          1\n  05275                   1         1            0                          1\n  05279                   1         1            0                          1\n  05280                   1         1            0                          1\n  05300                   1         1            0                          1\n  05335                   1         1            0                          1\n  05347                   1         1            0                          1\n  05349                   1         1            0                          1\n  05371                   1         1            0                          1\n  05397                   1         1            0                          1\n  05404                   1         1            0                          1\n  05419                   1         1            0                          1\n  05424                   1         1            0                          1\n  05426                   1         1            0                          1\n  05433                   1         1            0                          1\n  05440                   1         1            0                          1\n  05467                   1         1            0                          1\n  05480                   1         1            0                          1\n  05490                   1         1            0                          1\n  05516                   1         1            0                          1\n  05538                   1         1            0                          1\n  05541                   1         1            0                          1\n  05546                   1         1            0                          1\n  05562                   1         1            0                          1\n  05629                   1         1            0                          1\n  05643                   1         1            0                          1\n  05663                   0         1            1                          0\n  05664                   1         1            0                          1\n  05676                   1         1            0                          1\n  05688                   1         1            0                          1\n  05692                   1         1            0                          1\n  05705                   1         1            0                          1\n  05717                   1         1            0                          1\n  05719                   1         1            0                          1\n  05731                   1         1            0                          1\n  05745                   1         1            0                          1\n  05750                   1         1            0                          1\n  05779                   1         1            0                          1\n  05792                   1         1            0                          1\n  05797                   1         1            0                          1\n  05800                   1         1            0                          1\n  05822                   1         1            0                          1\n  05825                   1         1            0                          1\n  05839                   1         1            0                          1\n  05856                   1         1            0                          1\n  05871                   1         1            0                          1\n  05906                   1         1            0                          1\n  05930                   1         1            0                          1\n  05941                   1         1            0                          1\n  06093                   1         1            0                          1\n  06105                   1         1            0                          1\n  06109                   1         1            0                          1\n  06129                   1         1            0                          1\n  06157                   1         1            0                          1\n  06158                   1         1            0                          1\n  06159                   1         1            0                          1\n  06163                   1         1            0                          1\n  06170                   1         1            0                          1\n  06182                   1         1            0                          1\n  06186                   1         1            0                          1\n  06197                   1         1            0                          1\n  06199                   1         1            0                          1\n  06217                   1         1            0                          1\n  06258                   1         1            0                          1\n  06259                   1         1            0                          1\n  06260                   1         1            0                          1\n  06262                   1         1            0                          1\n  06263                   1         1            0                          1\n  06264                   1         1            0                          1\n  06265                   1         1            0                          1\n  06266                   1         1            0                          1\n  06272                   1         1            0                          1\n  06273                   1         1            0                          1\n  06275                   1         1            0                          1\n  06305                   1         1            0                          1\n  06310                   1         1            0                          1\n  06312                   1         1            0                          1\n  06314                   1         1            0                          1\n  06336                   1         1            0                          1\n  06337                   1         1            0                          1\n  06344                   1         1            0                          1\n  06346                   1         1            0                          1\n  06347                   1         1            0                          1\n  07075                   1         1            0                          1\n  07099                   1         1            0                          1\n  07105                   1         1            0                          1\n  07106                   1         1            0                          1\n  07187                   1         1            0                          1\n  07244                   1         1            0                          1\n  07298                   1         1            0                          1\n  07319                   1         1            0                          1\n  07321                   1         1            0                          1\n  07329                   1         1            0                          1\n  07330                   1         1            0                          1\n  07331                   1         1            0                          1\n  07341                   1         1            0                          1\n  07343                   1         1            0                          1\n  07350                   1         1            0                          1\n  07351                   1         1            0                          1\n  07364                   1         1            0                          1\n  07367                   1         1            0                          1\n  07368                   1         1            0                          1\n  07369                   1         1            0                          1\n  07370                   1         1            0                          1\n  07373                   1         1            0                          1\n  07374                   1         1            0                          1\n  07389                   1         1            0                          1\n  07393                   1         1            0                          1\n  07394                   1         1            0                          1\n  07395                   1         1            0                          1\n  07396                   1         1            0                          1\n  07403                   1         1            0                          1\n  07410                   1         1            0                          1\n  07412                   1         1            0                          1\n  07419                   1         1            0                          1\n  07420                   1         1            0                          1\n  07424                   1         1            0                          1\n  07427                   1         1            0                          1\n  07428                   1         1            0                          1\n  07431                   1         1            0                          1\n  07432                   1         1            0                          1\n  13670                   1         1            0                          1\n  13674                   1         1            0                          1\n  13675                   1         1            0                          1\n  13696                   1         1            0                          1\n  13700                   1         1            0                          1\n  13710                   1         1            0                          1\n  13711                   1         1            0                          1\n  13713                   1         1            0                          1\n  13776                   1         1            0                          1\n  13777                   1         1            0                          1\n  13965                   1         1            0                          1\n  15000                   1         1            0                          1\n  15207                   1         1            0                          1\n  15444                   1         1            0                          1\n  15555                   1         1            0                          1\n  15813                   1         1            0                          1\n  19171                   1         1            0                          1\n  19172                   1         1            0                          1\n  19207                   1         1            0                          1\n  19856                   1         1            0                          1"
  },
  {
    "objectID": "Metadaten.html#letzte-standorte",
    "href": "Metadaten.html#letzte-standorte",
    "title": "Metadaten",
    "section": "letzte Standorte",
    "text": "letzte Standorte\n\n\nCode\n# 1. Letzten Eintrag je Station auswählen\nlast_pos &lt;- meta_geo_clean %&gt;%\n  group_by(Stations_id) %&gt;%\n  filter(bis_datum == max(bis_datum, na.rm = TRUE)) %&gt;%\n  ungroup() %&gt;%\n  distinct(Stations_id, .keep_all = TRUE)\n\n\nWarning: There were 77 warnings in `filter()`.\nThe first warning was:\nℹ In argument: `bis_datum == max(bis_datum, na.rm = TRUE)`.\nℹ In group 12: `Stations_id = \"1200\"`.\nCaused by warning in `max.default()`:\n! no non-missing arguments to max; returning -Inf\nℹ Run `dplyr::last_dplyr_warnings()` to see the 76 remaining warnings.\n\n\nCode\n# 2. In sf-Objekt umwandeln\nstations_sf &lt;- st_as_sf(\n  last_pos,\n  coords = c(\"Geogr.Laenge\", \"Geogr.Breite\"),\n  crs = 4326\n)\n\n# 3. Deutschlandkarte laden\ngermany &lt;- ne_countries(scale = \"medium\", country = \"Germany\", returnclass = \"sf\")\n\n\n\n\nCode\n# 4. Karte plotten\nggplot(data = germany) +\n  geom_sf(fill = \"antiquewhite\") +\n  geom_sf(data = stations_sf, color = \"red\", size = 1) +\n  theme_minimal() +\n  labs(title = \"Letzte bekannte Position der DWD-Stationen\",\n       subtitle = \"Datenquelle: DWD - 10-minütige Temperaturmessungen\",\n       x = \"Longitude\", y = \"Latitude\")\n\n\n\n\n\n\n\n\n\n\n\nCode\nsessionInfo()\n\n\nR version 4.4.3 (2025-02-28)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS Sequoia 15.4\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Europe/Berlin\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] rnaturalearthdata_1.0.0 rnaturalearth_1.0.1     sf_1.0-20              \n [4] tidyr_1.3.1             ggplot2_3.5.1           stringi_1.8.7          \n [7] lubridate_1.9.4         fs_1.6.5                purrr_1.0.4            \n[10] stringr_1.5.1           dplyr_1.1.4             readr_2.1.5            \n[13] rvest_1.0.4            \n\nloaded via a namespace (and not attached):\n [1] utf8_1.2.4         generics_0.1.3     renv_1.1.4         class_7.3-23      \n [5] xml2_1.3.8         KernSmooth_2.23-26 hms_1.1.3          digest_0.6.37     \n [9] magrittr_2.0.3     evaluate_1.0.3     grid_4.4.3         timechange_0.3.0  \n[13] fastmap_1.2.0      jsonlite_1.9.1     e1071_1.7-16       DBI_1.2.3         \n[17] httr_1.4.7         scales_1.3.0       codetools_0.2-20   cli_3.6.4         \n[21] rlang_1.1.5        units_0.8-7        munsell_0.5.1      withr_3.0.2       \n[25] yaml_2.3.10        tools_4.4.3        tzdb_0.5.0         colorspace_2.1-1  \n[29] vctrs_0.6.5        R6_2.6.1           proxy_0.4-27       lifecycle_1.0.4   \n[33] classInt_0.4-11    pkgconfig_2.0.3    terra_1.8-42       pillar_1.10.1     \n[37] gtable_0.3.6       glue_1.8.0         Rcpp_1.0.14        xfun_0.51         \n[41] tibble_3.2.1       tidyselect_1.2.1   rstudioapi_0.17.1  knitr_1.50        \n[45] farver_2.1.2       htmltools_0.5.8.1  rmarkdown_2.29     compiler_4.4.3"
  },
  {
    "objectID": "Metadaten.html#download-von-opendata.dwd",
    "href": "Metadaten.html#download-von-opendata.dwd",
    "title": "Metadaten",
    "section": "Download von opendata.dwd",
    "text": "Download von opendata.dwd\nsource: https://opendata.dwd.de/climate_environment/CDC/observations_germany/climate/10_minutes/air_temperature/meta_data/\n\n\nCode\nif (!file.exists(\"dwd_data/meta/\")) {\n  \n  meta_base_url &lt;- \"https://opendata.dwd.de/climate_environment/CDC/observations_germany/climate/10_minutes/air_temperature/meta_data/\"\n  \n  # HTML einlesen & ZIP-Links extrahieren\n  meta_page &lt;- read_html(meta_base_url)\n  \n  zip_links &lt;- meta_page %&gt;%\n    html_elements(\"a\") %&gt;%\n    html_attr(\"href\") %&gt;%\n    str_subset(\"^Meta_Daten_zehn_min_tu_\\\\d{5}\\\\.zip$\") %&gt;%\n    paste0(meta_base_url, .)\n  \n  # Zielordner\n  meta_dir &lt;- \"dwd_data/meta/\"\n  dir_create(meta_dir)\n  \n  # ZIPs herunterladen & entpacken\n  walk(zip_links, function(url) {\n    file &lt;- basename(url)\n    zip_path &lt;- file.path(meta_dir, file)\n    station_id &lt;- str_extract(file, \"\\\\d{5}\")\n    \n    if (!file_exists(zip_path)) {\n      message(\"Lade: \", file)\n      download.file(url, destfile = zip_path, mode = \"wb\")\n    }\n    \n    unzip(zip_path, exdir = file.path(meta_dir, station_id))\n  })\n}"
  },
  {
    "objectID": "Metadaten.html#überblick",
    "href": "Metadaten.html#überblick",
    "title": "Metadaten",
    "section": "Überblick",
    "text": "Überblick\n\nletzte Standorte\n\n\nCode\n# Letzten Eintrag je Station auswählen\nlast_pos &lt;- meta_geo_clean %&gt;%\n  group_by(Stations_id) %&gt;%\n  filter(\n    if (all(is.na(bis_datum))) {\n      TRUE\n    } else {\n      bis_datum == max(bis_datum, na.rm = TRUE)\n    }\n  ) %&gt;%\n  ungroup() %&gt;%\n  distinct(Stations_id, .keep_all = TRUE)\n\n# In sf-Objekt umwandeln\nstations_sf &lt;- st_as_sf(\n  last_pos,\n  coords = c(\"Geogr.Laenge\", \"Geogr.Breite\"),\n  crs = 4326\n)\n\n# Deutschlandkarte laden\ngermany &lt;- ne_countries(scale = \"medium\", country = \"Germany\", returnclass = \"sf\")\n\n\n\n\nCode\nggplot(data = germany) +\n  geom_sf(fill = \"antiquewhite\") +\n  geom_sf(data = stations_sf, color = \"red\", size = 1) +\n  theme_minimal() +\n  labs(title = paste0(\"aktuelle Positionen der \",nrow(stations_sf),\" DWD-Stationen\"),\n       subtitle = \"Datenquelle: DWD - 10-minütige Temperaturmessungen, Metadaten\",\n       x = \"Longitude\", y = \"Latitude\")\n\n\n\n\n\n\n\n\n\n\n\nStationshöhen, Trend?\n\n\nCode\n# Ersetze NA in bis_datum mit aktuellem Datum\ngeo_elevation &lt;- meta_geo_clean %&gt;%\n  select(Stations_id, Stationshoehe, von_datum, bis_datum) %&gt;%\n  mutate(\n    bis_datum = if_else(is.na(bis_datum), today(), bis_datum),\n    year_start = year(von_datum),\n    year_end = year(bis_datum)\n  ) %&gt;%\n  drop_na(Stationshoehe)\n\n\n\n\nCode\nmean_elevation_trend &lt;- geo_elevation %&gt;%\n  group_by(year_end) %&gt;%\n  summarise(\n    mean_height = mean(Stationshoehe, na.rm = TRUE),\n    n = n()\n  )\n\nmedian_elevation_trend &lt;- geo_elevation %&gt;%\n  group_by(year_end) %&gt;%\n  summarise(\n    median_height = median(Stationshoehe, na.rm = TRUE),\n    n = n()\n  )\n\n\n\n\nCode\nggplot(mean_elevation_trend, aes(x = year_end, y = mean_height)) +\n  geom_line(color = \"blue\") +\n  geom_point() +\n  labs(title = \"Mittlere Stationshöhe über die Zeit\",\n       x = \"Jahr\",\n       y = \"Mittlere Stationshöhe [m]\") + \n  theme_bw()\n\n\n\n\n\n\n\n\n\n\n\nCode\n# 1. Gruppieren nach Jahr und berechnen:\nsummary_year &lt;- geo_elevation %&gt;%\n  group_by(year_end) %&gt;%\n  summarise(\n    mean_height = mean(Stationshoehe, na.rm = TRUE),\n    n_stations = n_distinct(Stations_id)\n  )\n\n# 2. Plot mit zwei Achsen\nggplot(summary_year, aes(x = year_end)) +\n  geom_line(aes(y = mean_height), color = \"blue\", size = 1) +\n  geom_line(aes(y = n_stations * 2), color = \"darkgreen\", linetype = \"dashed\") +  # skaliert für zweite Achse\n  scale_y_continuous(\n    name = \"Mittlere Stationshöhe [m]\",\n    sec.axis = sec_axis(~./2, name = \"Anzahl Stationen\")\n  ) +\n  labs(\n    title = \"Entwicklung der Stationshöhe und Anzahl der Stationen\",\n    x = \"Jahr\"\n  ) +\n  theme_minimal()\n\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n\n\n\n\n\n\n\n\n\n!! something is wrong with n stations\n\n\nCode\nlm_fit &lt;- lm(Stationshoehe ~ year_end, data = geo_elevation)\nsummary(lm_fit)\n\n\n\nCall:\nlm(formula = Stationshoehe ~ year_end, data = geo_elevation)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-301.13 -204.06  -48.26  130.02 2661.88 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)   \n(Intercept) -442.9304   231.8377  -1.911  0.05617 . \nyear_end       0.3672     0.1174   3.129  0.00177 **\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 257.5 on 2678 degrees of freedom\nMultiple R-squared:  0.003642,  Adjusted R-squared:  0.00327 \nF-statistic: 9.789 on 1 and 2678 DF,  p-value: 0.001775\n\n\n\n\nCode\nggplot(median_elevation_trend, aes(x = year_end, y = median_height)) +\n  geom_line(color = \"blue\") +\n  geom_point() +\n  labs(title = \"Mediane Stationshöhe über die Zeit\",\n       x = \"Jahr\",\n       y = \"Mittlere Stationshöhe [m]\")\n\n\n\n\n\n\n\n\n\n\n\nCode\nsessionInfo()\n\n\nR version 4.4.3 (2025-02-28)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS Sequoia 15.4\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Europe/Berlin\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices datasets  utils     methods   base     \n\nother attached packages:\n [1] rnaturalearthdata_1.0.0 rnaturalearth_1.0.1     sf_1.0-20              \n [4] tidyr_1.3.1             ggplot2_3.5.1           stringi_1.8.7          \n [7] lubridate_1.9.4         fs_1.6.5                purrr_1.0.4            \n[10] stringr_1.5.1           dplyr_1.1.4             readr_2.1.5            \n[13] rvest_1.0.4            \n\nloaded via a namespace (and not attached):\n [1] utf8_1.2.4         generics_0.1.3     renv_1.1.4         class_7.3-23      \n [5] xml2_1.3.8         KernSmooth_2.23-26 hms_1.1.3          digest_0.6.37     \n [9] magrittr_2.0.3     evaluate_1.0.3     grid_4.4.3         timechange_0.3.0  \n[13] fastmap_1.2.0      jsonlite_1.9.1     e1071_1.7-16       DBI_1.2.3         \n[17] httr_1.4.7         scales_1.3.0       codetools_0.2-20   cli_3.6.4         \n[21] rlang_1.1.5        units_0.8-7        munsell_0.5.1      withr_3.0.2       \n[25] yaml_2.3.10        tools_4.4.3        tzdb_0.5.0         colorspace_2.1-1  \n[29] vctrs_0.6.5        R6_2.6.1           proxy_0.4-27       lifecycle_1.0.4   \n[33] classInt_0.4-11    pkgconfig_2.0.3    terra_1.8-42       pillar_1.10.1     \n[37] gtable_0.3.6       glue_1.8.0         Rcpp_1.0.14        xfun_0.51         \n[41] tibble_3.2.1       tidyselect_1.2.1   rstudioapi_0.17.1  knitr_1.50        \n[45] farver_2.1.2       htmltools_0.5.8.1  labeling_0.4.3     rmarkdown_2.29    \n[49] compiler_4.4.3"
  }
]